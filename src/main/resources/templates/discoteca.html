<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security">

<head>
    <link rel="stylesheet" th:href="@{/css/base.css}">
    <link rel="stylesheet" th:href="@{/css/discoteca.css}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ItaloDisco - Discoteche di Roma</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link href="https://fonts.googleapis.com/css2?family=Geologica:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- SEZIONE HERO CON LAYER A SOPRAPPOSIZIONE -->
    <section class="sezione-hero">
        <!-- Strati grafici dello sfondo -->
        <div class="immagine-sfondo-hero"></div>
        <div class="sovrapposizione-hero"></div>
        <div class="sovrapposizione-header"></div>

        <!-- NAVIGAZIONE PRINCIPALE -->
        <nav class="navigazione-principale">
            <div class="menu-sinistra">
                <div class="voce-menu" onclick="location.href='/'">HOME</div>
                <div class="voce-menu" onclick="location.href='/preferiti'">PREFERITI</div>
            </div>

            <!-- LOGIN / LOGOUT UNIFICATO -->
            <div class="menu-destra">
                <div class="voce-menu" sec:authorize="isAuthenticated()">
                    <span th:text="${#authentication.name}">Utente</span>
                </div>
                <div class="voce-menu pulsante-login" sec:authorize="isAuthenticated()" onclick="document.getElementById('logoutForm').submit()">LOGOUT</div>
                <form id="logoutForm" th:action="@{/logout}" method="post" style="display: none;"></form>

                <div class="voce-menu pulsante-login" sec:authorize="isAnonymous()" onclick="location.href='/login'">LOGIN</div>
            </div>
        </nav>

        <!-- CONTENUTO CENTRALE HERO -->
        <div class="contenuto-hero">
            <h1 class="discoteca-principale" th:text="${discoteca.nome}"></h1>
            <p class="descrizione-hero" th:text="${discoteca.indirizzo}"></p>
            <p class="descrizione-hero" th:text="${discoteca.descrizione}"></p>
        </div>
    </section>

	<!-- SEZIONE DISCOTECHE CON ELENCO DI EVENTI -->
	<section class="sezione-discoteche">
	    <h2 class="titolo-sezione">EVENTI</h2>

	    <div th:if="${#lists.isEmpty(eventi)}">
	        <h1 class="evento">Non ci sono eventi per questa discoteca</h1>
	    </div>

	    <div class="griglia-eventi">
	        <div th:each="evento : ${eventi}" class="evento-card">
	            <h4 class="titolo-evento" th:text="${evento.nome}">Nome Evento</h4>
	            <p th:text="${evento.descrizione}">Descrizione Evento</p>
				<p>
					
					<p>
					    <span class="etichetta">Recensioni:</span>
					    <span th:if="${evento.mediaRecensioni == null}">Nessuna recensione</span>
					    <span th:if="${evento.mediaRecensioni != null}" class="stelle">
					        <!-- Ciclo per stampare le stelle piene -->
					        <span class="stella piena" th:each="i : ${#numbers.sequence(1, evento.stelleArrotondate)}">★</span>
					        <!-- Ciclo per stampare le stelle vuote -->
					        <span class="stella vuota" th:each="i : ${#numbers.sequence(1, 5 - evento.stelleArrotondate)}">☆</span>
					        (<span th:text="${#numbers.formatDecimal(evento.mediaRecensioni, 1, 1)}"></span>)
					    </span>
					</p>
				           <span class="etichetta">Data:</span>
				           <span th:text="${#temporals.format(evento.dataOra, 'dd/MM/yyyy HH:mm')}">Data e Ora</span>
				       </p>

				       <p>
				           <span class="etichetta">Prezzo:</span>
				           <span th:text="${evento.prezzo} + ' €'">Prezzo</span>
				       </p>

	            <form th:action="@{'/evento/' + ${evento.id} + '/preferito'}" method="post">
	                <button type="submit" class="bottone-preferito">Aggiungi ai preferiti ❤</button>
	            </form>
	        </div>
	    </div>
	</section>

    <!-- PIÈ DI PAGINA CON LAYOUT A GRIGLIA -->
    <footer class="piè-di-pagina">
        <div class="contenuto-footer">
            <!-- COLONNA MARCHIO -->
            <div class="marchio-footer">
                <h4>ITALODISCO</h4>
                <p>©2025 - ItaloDisco</p>
                <p>P.IVA 893263</p>
            </div>

            <!-- COLONNA CONTATTI -->
            <div class="sezione-footer">
                <h4>CONTATTI</h4>
                <p>-39 542 928 462</p>
                <p>italodisco@gmail.com</p>
                <p>pec@tmp.it</p>
                <p>FAX 593 039 0293</p>
            </div>

            <!-- COLONNA INFORMAZIONI -->
            <div class="sezione-footer">
                <h4>INFORMAZIONI</h4>
                <p>Chi siamo</p>
                <p>Prezzi</p>
                <p>Lavora con noi</p>
                <p>Licenza</p>
            </div>

            <!-- COLONNA SOCIAL -->
            <div class="sezione-footer">
                <h4>SOCIAL</h4>
                <p>Facebook</p>
                <p>Instagram</p>
                <p>TikTok</p>
                <p>LinkedIn</p>
                <p>YouTube</p>
                <p>Discord</p>
            </div>

            <!-- COLONNA PARTNER CON LOGHI -->
            <div class="partner-footer">
                <h4>PARTNER</h4>
                <div class="loghi-partner">
                    <div class="logo-partner"></div>
                    <div class="logo-partner"></div>
                    <div class="logo-partner"></div>
                    <div class="logo-partner"></div>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>